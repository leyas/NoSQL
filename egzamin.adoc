==== Import danych do bazy
Korzystam z danych REDDIT już zaimportowanych do bazy MongoDB i opisanych pod linkiem: https://github.com/leyas/NoSQL/blob/master/zaliczenie.adoc.

Zaimportowano 53 851 542 rekordów.

image::http://s3.postimg.org/7hu3ldo0z/8import_result.png[import result]

==== Wykonanie agregacji

1. Spośród wszystkich wpisów wyszukamy 10 osób które uzyskały najgorszy winik w ciągu ostatniego miesiąca.

a) JavaScript 
```
db.myColl.runCommand('aggregate', 
  {pipeline: [
		{ $group: { _id: "$author", score: { $sum: "$score" } } },
		{ $sort: { score: 1 } },
		{ $limit : 10 }
	], 
allowDiskUse: true})
```
image::http://s12.postimg.org/a23n6y3bx/1javascript_wynik.png[1javascript_wynik]

b) Java

c) Porównanie JavaScript i Java
|===
| Język | Czas | zużycie CPU | zużycie RAM

| JavaScript
| 14 min
| 20 %
| 99%

| Java
| 
|
|

|===

image::http://s3.postimg.org/7hu3ldo0z/1javascript.png[1javascript]
image::http://s3.postimg.org/7hu3ldo0z/1java.png[1java]

2. Ile średnio polubień dostaje post.
```
db.myColl.runCommand('aggregate', 
	{pipeline: [
		{ $group: { 
			_id: null, 
			avg: { $avg: "$ups" } 
			} 
		},
	], 
       	allowDiskUse: true})
```
image::http://s12.postimg.org/izbyl76fx/2javascript_wynik.png[2javascript_wynik]
b) Java

c) Porównanie JavaScript i Java
image::http://s23.postimg.org/dval34t63/2javascript.png[2javascript]
|===
| Język | Czas | zużycie CPU | zużycie RAM

| JavaScript
| 11 min
| 20 %
| 99%

| Java
| 
|
|

|===
