== Zadanie 1 - Neo4j

* Zainstalować na swoim komputerze bazę http://neo4j.com[Neo4j].
* Przeczytać artykuł http://neo4j.com/blog/import-10m-stack-overflow-questions[Import 10M Stack Overflow Questions into Neo4j In Just 3 Minutes] i wykonać kod z tego artykułu.
* Opisać wszystkio to co się zdarzyło w jakimś repozytorium w pliku README.adoc (w formacie http://asciidoctor.org/[AsciiDoc]).

==== Download Stack Exchange Dump Files
Ponieważ nie mam dużo miejsca na dysku więc pobieram 3 pliki.

Należy pobrać 3 pliki:
link:https://archive.org/download/stackexchange/stackoverflow.com-Posts.7z[Posts.7z],
link:https://archive.org/download/stackexchange/stackoverflow.com-Tags.7z[Tags.7z],
link:https://archive.org/download/stackexchange/stackoverflow.com-Users.7z[Users.7z]

==== Unzip the .7z Files
Plik pobierał się 7 godzin, po czy się zepsuł i nie można go rozpakować.

Po ponownej próbie udało się pobrać i rozpakować pliki.
Rozpakowujemy poleceniem:

`for i in *.7z; do 7za -y -oextracted x $i; done`

==== Clone Damien’s GitHub repository
Kolejnym krokiem będzie sklonowanie repozytorium. Można to zrobić następującym poleceniem:

`git clone https://github.com/mdamien/stackoverflow-neo4j`

Następnym krokiem jest isntalacja Pythona, gdyż będzie on potrzebny. Ja używam Systemu Fedora, dlatego używam następujących komend.

`sudo su`

`yum install python3-setuptools`

`sudo pip3 install xmltodict`

==== Run the XML-to-CSV Conversion

Konwertujemy pliki za pomocą komendy:

`python3 to_csv.py extracted`

czas trwania konwersji 3,5h


==== Import into Neo4j
Teraz zaimportujemy wszystkie dane do Neo4j.
W folderze zawierającym plik Noe4j wykonujemy następujące polecenia:

....
./neo4j-import \
--into ../neo/data/graph.db \
--id-type string \
--nodes:Post ../../stackoverflow-neo4j/csvs/posts.csv \
--nodes:User ../../stackoverflow-neo4j/csvs/users.csv \
--nodes:Tag ../../stackoverflow-neo4j/csvs/tags.csv \
--relationships:PARENT_OF ../../stackoverflow-neo4j/csvs/posts_rel.csv \
--relationships:HAS_TAG ../../stackoverflow-neo4j/csvs/tags_posts_rel.csv \
--relationships:POSTED ../../stackoverflow-neo4j/csvs/users_posts_rel.csv
....

Jeśli chodzi o ścieżki dostępu do plików... np. ../../stackoverflow-neo4j/csvs/posts.csv to zależy to od miejsca gdzie przechowujesz swoje dane. Najprawdopodobniej będzie to inna ścieżka.

Otrzymałem błąd który na razie zignoruję:
....
mport error: Panic called, so exiting
java.lang.RuntimeException: Panic called, so exiting
	at org.neo4j.unsafe.impl.batchimport.staging.AbstractStep.assertHealthy(AbstractStep.java:205)
	at org.neo4j.unsafe.impl.batchimport.staging.AbstractStep.await(AbstractStep.java:196)
....


==== Neo4j Configuration
Aby skonfigurować serwer wg uznania, edytuj poniższe pliki: 

`conf/neo4j.properties`

`dbms.pagecache.memory`

`conf/neo4j-wrapper.conf`

Gdy skończysz konfigurację, uruchom sewer następującym poleceniem

`../neo/bin/neo4j start`

Nie idzie uruchomić neo4j.

image::https://github.com/leyas/NoSQL/blob/master/zdjecia/warning.png[Warning.img]
